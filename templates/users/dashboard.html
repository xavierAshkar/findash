{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Your Accounts</h1>

{% if accounts %}
  <div class="space-y-8">

    {% for acct_type in account_types %}
    <div>
      <h2 class="text-2xl font-semibold capitalize mb-2">{{ acct_type }} Accounts</h2>
      <ul class="list-disc list-inside">
        {% for account in accounts %}
          {% if account.type == acct_type %}
            <li>
              <strong>{{ account.name }}</strong>
              {% if account.official_name %} ({{ account.official_name }}){% endif %}
              <br>
              Available Balance: ${{ account.available_balance|default:"N/A" }}
              <br>
              Current Balance: ${{ account.current_balance|default:"N/A" }}
            </li>
          {% endif %}
        {% empty %}
          <li>No {{ acct_type }} accounts linked.</li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}


  </div>
{% else %}
  <p>You have no accounts linked. <a href="{% url 'plaid:link_account' %}">Link your bank account now</a>.</p>
{% endif %}
{% endblock %}
