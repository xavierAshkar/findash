{% extends "app/base.html" %}

{% block title %}Cashflow{% endblock %}

{% block header %}
  <h1 class="text-xl font-semibold">Cashflow</h1>
{% endblock %}

{% block content %}
  <div class="space-y-6">

    <section class="rounded-lg border border-zinc-800 bg-zinc-950 p-4">
      <div class="text-sm text-zinc-400">Month</div>
      <div class="text-lg font-semibold text-white">
        {{ cashflow.current.month }}
      </div>
    </section>

    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="rounded-lg border border-zinc-800 bg-zinc-950 p-4">
        <div class="text-sm text-zinc-400">Income</div>
        <div class="text-2xl font-semibold">{{ cashflow.current.income }}</div>
        <div class="text-sm text-zinc-400">Δ {{ cashflow.delta.income }}</div>
      </div>

      <div class="rounded-lg border border-zinc-800 bg-zinc-950 p-4">
        <div class="text-sm text-zinc-400">Expenses</div>
        <div class="text-2xl font-semibold">{{ cashflow.current.expenses }}</div>
        <div class="text-sm text-zinc-400">Δ {{ cashflow.delta.expenses }}</div>
      </div>

      <div class="rounded-lg border border-zinc-800 bg-zinc-950 p-4">
        <div class="text-sm text-zinc-400">Net</div>
        <div class="text-2xl font-semibold">{{ cashflow.current.net }}</div>
        <div class="text-sm text-zinc-400">Δ {{ cashflow.delta.net }}</div>
      </div>
    </section>

    <section class="rounded-lg border border-zinc-800 bg-zinc-950">
      <div class="px-4 py-3 border-b border-zinc-800">
        <h2 class="font-semibold">Spending by category</h2>
        <div class="text-sm text-zinc-400">Current month (transfers/payments excluded)</div>
      </div>

      <div class="p-4">
        {% if cashflow.current.by_category %}
          <div class="space-y-2">
            {% for cat, amt in cashflow.current.by_category.items %}
              <div class="flex items-center justify-between rounded-lg border border-zinc-800 bg-zinc-950 p-3">
                <div class="text-zinc-200">{{ cat }}</div>
                <div class="font-semibold text-white">{{ amt }}</div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="text-zinc-300">No categorized spending yet.</div>
        {% endif %}
      </div>
    </section>

  </div>
{% endblock %}
